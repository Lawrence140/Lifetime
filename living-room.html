<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Living Room</title>
    <link rel="stylesheet" href="./index.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <div id="interactionPopup" style="position: fixed; bottom: 50px; left: 50%; transform: translateX(-50%); padding: 10px 20px; background: rgba(0,0,0,0.7); color: white; font-family: sans-serif; font-size: 16px; border-radius: 8px; display: none;">Press E to interact</div>

    <div id="paperUI" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; background: white; border: 2px solid black; display: none; padding: 16px; font-family: monospace; font-size: 20px; color: black; border-radius: 8px; text-align: center; z-index:1000;">Found: A scribbled number - 3 7 1</div>

    <div id="textPanel" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 20px; border-radius: 10px; font-family: Arial, sans-serif; font-size: 18px; text-align: center; display: none; max-width: 400px; z-index: 1000;"></div>

    <!-- Objectives Panel -->
    <div id="objectivesPanel" style="position: fixed; top: 20px; left: 20px; background: rgba(0, 0, 0, 0.75); color: white; padding: 15px 20px; border-radius: 10px; font-family: Arial, sans-serif; font-size: 16px; max-width: 350px; z-index: 100;">
      <div style="font-size: 20px; font-weight: bold; margin-bottom: 10px; color: #ffd700;">OBJECTIVE</div>
  <div style="margin-bottom: 8px;">Follow the hints ðŸ’¡ on the map to find and collect all hidden fragments to unlock the way to the secret room.</div>
      <div id="fragmentCounter" style="margin-top: 10px; font-size: 18px; color: #88ff88;">Fragments Collected: 0/3</div>
    </div>

    <!-- Clues Review Panel -->
    <div id="cluesPanel" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.95); color: white; padding: 30px; border-radius: 15px; font-family: Arial, sans-serif; max-width: 600px; max-height: 80vh; overflow-y: auto; z-index: 1500;">
      <div style="font-size: 28px; font-weight: bold; margin-bottom: 20px; color: #ffd700; text-align: center;">COLLECTED CLUES</div>
      <div id="cluesContent" style="font-size: 16px; line-height: 1.6;"></div>
      <div style="margin-top: 20px; text-align: center; color: #aaaaaa; font-size: 14px;">Press "P" to close</div>
    </div>

    <!-- Timer + Game Over -->
    <div id="timer" style="position: fixed; top: 20px; right: 20px; font-size: 48px; color: white; font-family: 'Courier New', monospace; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); z-index: 100;"></div>
    <div id="gameOver" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.95); padding: 60px; border-radius: 15px; text-align: center; z-index: 2000;">
      <div style="color: #ff4444; font-size: 72px; font-family: Arial, sans-serif; font-weight: bold; margin-bottom: 30px; text-shadow: 3px 3px 6px rgba(0,0,0,0.8);">GAME OVER</div>
      <button id="restartBtn" style="padding: 15px 40px; font-size: 24px; cursor: pointer; border: none; border-radius: 8px; background: #4CAF50; color: white; font-weight: bold;">Restart</button>
    </div>

    <!-- Pause Menu -->
    <div id="pauseMenu" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.95); padding: 40px; border-radius: 10px; text-align: center; z-index: 2000;">
      <h2 style="color: white; margin-bottom: 30px; font-family: Arial, sans-serif;">PAUSED</h2>
      <button id="resumeBtn" style="display: block; width: 200px; margin: 15px auto; padding: 15px; font-size: 18px; cursor: pointer; border: none; border-radius: 5px; background: #4CAF50; color: white;">Resume</button>
      <button id="restartBtnPause" style="display: block; width: 200px; margin: 15px auto; padding: 15px; font-size: 18px; cursor: pointer; border: none; border-radius: 5px; background: #2196F3; color: white;">Restart</button>
      <button id="quitBtn" style="display: block; width: 200px; margin: 15px auto; padding: 15px; font-size: 18px; cursor: pointer; border: none; border-radius: 5px; background: #f44336; color: white;">Quit</button>
    </div>

    <canvas id="minimap"></canvas>

    <script type="module" src="./living-room.js"></script>
    <audio id="bgMusic" src="./aurenth - green to blue (Slowed + Reverb).mp3" autoplay loop hidden></audio>
    <script>
      const m = document.getElementById('bgMusic');
      m.volume = 0.18;
      m.play().catch(()=>{});
      function resumeMusic(){ if(m.paused) m.play(); }
      window.addEventListener('click', resumeMusic);
      window.addEventListener('keydown', resumeMusic);
    </script>
  </body>
</html>
